(()=>{"use strict";const t=document.querySelector("[data-lists]"),e=document.querySelector("[data-new-list-form]"),n=document.querySelector("[data-new-list-input]"),a=document.querySelector("[data-delete-list-button]"),l=document.querySelector("[data-list-display-container]"),i=document.querySelector("[data-list-title]"),s=document.querySelector("[data-list-count]"),o=document.querySelector("[data-tasks]"),c=(document.getElementById("task-template"),"task.lists"),d="task.selectedListId";let r=JSON.parse(localStorage.getItem(c))||[],u=localStorage.getItem(d);function m(){f(t),r.forEach((e=>{const n=document.createElement("li");n.dataset.listId=e.id,n.classList.add("list-name"),n.innerText=e.name,e.id===u&&n.classList.add("active-list"),t.appendChild(n)}));const e=r.find((t=>t.id===u));null==u?l.style.display="none":(l.style.display="",i.innerText=e.name,function(t){const e=t.tasks.filter((t=>!t-complete)).length,n=1===e?"task":"tasks";s.innerText=`${e} ${n} \n  remaining`}(e),f(o),function(t){t.tasks.forEach((t=>{const e=document.importNode(t),n=e.querySelector("input");n.id=t.id,n.checked=t.complete,e.querySelector("label")}))}(e))}function f(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function y(){localStorage.setItem(c,JSON.stringify(r)),localStorage.setItem(d,u),m()}t.addEventListener("click",(function(t){"li"===t.target.tagName.toLowerCase()&&(u=t.target.dataset.listId,y())})),a.addEventListener("click",(function(t){r=r.filter((t=>t.id!==u)),u=null,y()})),e.addEventListener("submit",(t=>{t.preventDefault();const e=n.value;if(null==e||""===e)return;const a=(l=e,{id:Date.now().toString(),name:l,tasks:[]});var l;n.value=null,r.push(a),y()})),m()})();